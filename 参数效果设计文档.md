# 微信聊天模拟器 - 参数效果设计文档

## 📋 文档概述

本文档详细描述了微信聊天模拟器中所有YAML配置参数的播放效果，帮助用户理解和使用各种消息类型、动画控制和场景配置功能。

## 🎬 播放预览功能架构

### 核心组件

- **播放状态管理**：`usePlaybackState.ts` - 核心播放逻辑和状态管理
- **动画控制器**：`useAnimationControl.ts` - 消息动画时序控制
- **时间轴计算器**：`timelineCalculator.ts` - 精确的时间与消息索引双向转换
- **播放控制界面**：`PlaybackControls.tsx` - 用户交互控制面板
- **时间轴可视化**：`TimelineControl.tsx` - 可拖拽时间轴和关键帧标记

### 播放模式

- **normal 模式**：顺序播放，播放完成后停止
- **loop 模式**：循环播放，自动重复
- **preview 模式**：预览模式，显示所有消息，支持快速跳转

## 📝 基础消息类型效果

### 1. 普通文本消息

```yaml
- speaker: "小明"
  content: "你好吗？"
  time: "10:30"
```

**效果展现**：
- 展现标准的微信消息气泡样式
- 根据发送者自动判断消息方向（左侧/右侧）
- 自动计算显示延迟：800ms基础延迟 + 每字符20ms，最大1.5秒
- 支持长文本消息的自动换行

### 2. 消息状态控制

```yaml
- speaker: "小明" 
  content: "重要消息"
  status: "sending"        # sending/sent/read
  statusDuration: "medium" # short(1s)/medium(3s)/long(5s)
```

**各状态效果**：
- **sending 效果**：展现消息"发送中"状态，显示转圈Loading动画
- **sent 效果**：展现消息已发送但未读状态，显示单勾标识
- **read 效果**：展现消息已读状态，显示蓝色双勾标识

**statusDuration 控制状态持续时间**：
- `short`：状态显示1秒后转为最终状态
- `medium`：状态显示3秒后转为最终状态  
- `long`：状态显示5秒后转为最终状态

## ⏸️ 时间控制类型效果

### 3. 暂停等待（时间演绎效果）

```yaml
- type: "pause"
  duration: "30分钟"      # 逻辑时间，实际演绎时间会压缩
  description: "等待中..."  # 可选的暂停说明
  visualEffect: "timeElapse" # 可选：时间流逝视觉效果
```

**效果展现**：
- **短暂等待**（<5分钟）：在聊天界面中央显示简单的时间跳跃指示器，实际等待1-2秒
- **中等等待**（5分钟-1小时）：展现时间流逝动画，悬浮云朵飘过，时间数字递增，实际等待2-3秒
- **长时间等待**（>1小时）：展现完整的时间演绎序列，包含日夜变化、时间快进效果，实际等待3-5秒

**时间演绎效果类型**：

1. **短暂停顿** (`"稍后"`, `"片刻后"`, `"一会儿后"`)
   - 实际时间：1-2秒
   - 视觉效果：简单的波纹扩散 + 时间标签弹出
   - 适用场景：思考、打字间隙

2. **时间跳跃** (`"10分钟后"`, `"半小时后"`)
   - 实际时间：2-3秒
   - 视觉效果：时钟指针快速旋转 + 浮动云朵 + 递增数字
   - 最终显示："`30分钟的等待`"

3. **时间流逝** (`"1小时后"`, `"几小时后"`)
   - 实际时间：3-4秒
   - 视觉效果：
     - 第1秒：云朵从左侧飘入，时间从"00:01"开始递增
     - 第2秒：天空颜色渐变（白天→黄昏），数字加速跳跃
     - 第3秒：星空背景，时间快速冲刺到目标值
     - 第4秒：云朵散去，显示"`3600秒的等待`"

4. **超长等待** (`"一天后"`, `"几天后"`)
   - 实际时间：4-5秒
   - 视觉效果：
     - 日月交替动画
     - 时间数字以不同速度递增（秒→分→时）
     - 最终显示："`86400秒的等待`"或"`3天的漫长等待`"

**支持的时间格式及演绎映射**：
- 描述性时间：
  - `"稍后"` → 1秒演绎，展现5分钟效果
  - `"片刻后"` → 1.5秒演绎，展现10分钟效果
  - `"一会儿后"` → 2秒演绎，展现30分钟效果
  - `"很久之后"` → 3秒演绎，展现2小时效果
  - `"许久之后"` → 4秒演绎，展现半天效果
- 具体时间：
  - `"5分钟"` → 2秒演绎，时钟旋转效果
  - `"1小时"` → 3秒演绎，时间流逝效果
  - `"1天"` → 4秒演绎，日夜交替效果

### 4. 输入状态（动态演绎效果）

```yaml
- type: "typing"
  speaker: "小红"
  duration: "思考中"      # 支持描述性和具体时间
  hesitate: true         # 可选：显示犹豫效果
  intensity: "deep"      # 可选：思考强度 light/normal/deep
```

**效果展现**：
- 在对方头像旁显示"正在输入..."提示
- 三个点的动态跳跃动画，根据强度调整节奏
- **思考强度演绎效果**：
  - `light`：轻快的三点跳跃，1-2秒展现"快速思考"
  - `normal`：正常节奏跳跃，2-3秒展现"组织语言"
  - `deep`：缓慢而沉重的跳跃，3-4秒展现"深度思考"，可能伴随键盘敲击音效

**特殊演绎效果**：

1. **hesitate: true 犹豫效果**：
   - 第1秒：正常输入（三点跳跃）
   - 第2秒：突然停止，三点变为省略号"..."
   - 第3秒：重新开始输入，三点恢复跳跃
   - 营造"想说又不敢说"的纠结感

2. **长时间思考演绎**：
   ```yaml
   - type: "typing"
     speaker: "小红"  
     duration: "长时间思考"
     intensity: "deep"
   ```
   - 实际时间：4-5秒
   - 视觉效果：
     - 输入框周围出现思考泡泡
     - 三点跳跃逐渐变慢
     - 最后显示"经过深思熟虑..."的标签

**持续时间控制及演绎映射**：
- 描述性时间：
  - `"快速回复"` → 1秒演绎，轻快输入动画
  - `"思考中"` → 2-3秒演绎，正常输入节奏
  - `"组织语言"` → 3-4秒演绎，深度思考效果
  - `"长时间思考"` → 4-5秒演绎，包含思考泡泡动画
- 具体时间自动映射到合适的演绎时长（最长不超过5秒）

## 🎵 富媒体消息类型效果

### 5. 语音消息

```yaml
- type: "voice"
  speaker: "小明"
  voiceDuration: "10\""           # 语音时长，如 "15\"" 表示15秒
  voiceText: "这是语音转文字内容"  # 可选的语音转文字
  time: "11:00"
```

**效果展现**：
- 展现微信风格的语音消息气泡
- 显示语音播放按钮和时长标识
- 支持语音播放动画效果（声波动画）
- 如果提供 `voiceText`，可在点击时显示转文字内容

**voiceDuration 格式**：
- 使用双引号包裹数字，如 `"10\""`表示10秒语音
- 时长会影响消息气泡的宽度

### 6. 图片消息

```yaml
# 单图片
- type: "image"
  speaker: "小红"
  imageUrl: "https://example.com/image.jpg"
  imageDescription: "美丽的风景"

# 多图片（九宫格）
- type: "image"
  speaker: "小红"
  imageUrl: 
    - "https://example.com/img1.jpg"
    - "https://example.com/img2.jpg"
    - "https://example.com/img3.jpg"
  imageDescription: "旅行照片合集"
```

**效果展现**：
- **单图效果**：展现单张图片消息，支持图片预览和点击放大
- **多图效果**：自动排列为九宫格布局，最多支持9张图片
- 图片加载过程中显示占位符
- 支持图片描述文字显示

### 7. 位置消息

```yaml
- type: "location"
  speaker: "小明"
  content: "商业街星巴克"
  coordinates:
    latitude: 31.2304
    longitude: 121.4737
  time: "11:04"
```

**效果展现**：
- 展现微信风格的位置分享卡片
- 显示位置名称和地址信息
- 显示简化的地图预览图（基于坐标）
- 支持点击查看详细位置信息

## 🔄 特殊交互类型效果

### 8. 消息撤回（情感演绎效果）

```yaml
- type: "recall"
  speaker: "小红"
  originalMessage: "我想说的话..."  # 被撤回的原始消息
  recallDelay: "后悔瞬间"          # 支持情感化描述
  recallReason: "panic"           # 可选：撤回原因 regret/panic/mistake
  time: "11:05"
```

**效果展现**：
1. 首先正常显示原始消息内容
2. 根据撤回原因播放对应的演绎动画
3. 消息以特定方式消失，显示撤回提示

**情感化撤回演绎效果**：

1. **紧急撤回** (`recallDelay: "紧急"` 或 `recallReason: "panic"`)
   - 实际时间：0.5-1秒
   - 视觉效果：
     - 消息开始闪烁，颜色变红
     - 快速震动效果
     - "啪"的一声消失（音效）
     - 显示："`小红` 紧急撤回了一条消息"

2. **后悔撤回** (`recallDelay: "后悔瞬间"` 或 `recallReason: "regret"`)
   - 实际时间：1-2秒
   - 视觉效果：
     - 消息边框闪烁黄色警告
     - 出现小手指向消息的动画
     - 缓缓淡出消失
     - 显示："`小红` 撤回了一条消息" + 😅 表情

3. **深思后撤回** (`recallDelay: "深思后"` 或 `recallReason: "reconsider"`)
   - 实际时间：2-3秒
   - 视觉效果：
     - 消息周围出现思考泡泡
     - 泡泡破裂动画
     - 消息慢慢溶解消失
     - 显示："`小红` 重新考虑后撤回了消息"

4. **无痕撤回** (`recallDelay: "秒撤"`)
   - 实际时间：0.2-0.5秒
   - 视觉效果：
     - 消息刚出现就立即消失
     - 闪电般的撤回效果
     - 显示："`小红` 秒撤了一条消息" + 💨 效果

**撤回延迟时间映射**：
- 情感化描述：
  - `"瞬间"` / `"秒撤"` → 0.2秒演绎，闪电撤回
  - `"紧急"` / `"慌张"` → 0.5秒演绎，紧急撤回动画
  - `"后悔瞬间"` → 1秒演绎，后悔撤回效果
  - `"思考后"` / `"深思后"` → 2-3秒演绎，深思撤回动画
- 传统描述：
  - `"short"` → 0.5秒，简单消失
  - `"medium"` → 1秒，正常撤回
  - `"long"` → 2秒，慢速撤回

## ⚡ 动画延迟控制效果

### 9. 自定义动画延迟

```yaml
- speaker: "小明"
  content: "快速回复"
  animationDelay: "short"    # short/medium/long

- speaker: "小红"  
  content: "深思熟虑的回复"
  animationDelay: "long"
```

**延迟效果说明**：
- **short (500ms)**：展现快速连续对话的感觉，适用于激动、急切的对话
- **medium (1000ms)**：展现正常对话节奏，大部分消息的默认延迟
- **long (2000ms)**：展现深思熟虑或重要消息，营造严肃或慎重的氛围

**使用场景**：
- 快速连发多条消息时使用 `short`
- 表白、道歉等重要消息使用 `long`
- 日常对话使用 `medium` 或不设置（自动计算）

## 🎭 场景配置控制效果

### 10. 场景基础设置

```yaml
scene:
  title: "重要对话"
  participants:
    - name: "用户"
      avatar: "https://ui-avatars.com/api/?name=YH&background=5856D6&color=fff"
    - name: "朋友"
      avatar: "avatar2.jpg"
```

**效果说明**：
- **title**：对话场景标题，显示在界面顶部
- **participants**：定义对话参与者，第一个为当前用户（消息显示在右侧）
- **avatar**：支持URL链接或本地文件名

### 11. 主题样式配置

```yaml
scene:
  theme:
    primaryColor: "#95EC69"      # 微信绿主题色
    backgroundColor: "#F7F7F7"    # 聊天背景色
    fontFamily: "PingFang SC"     # 自定义字体
```

**效果展现**：
- **primaryColor**：影响发送按钮、进度条等主要UI元素颜色
- **backgroundColor**：聊天界面背景色
- **fontFamily**：消息文字字体样式

### 12. 动画全局配置

```yaml
scene:
  animation:
    globalSpeed: 1.5           # 全局播放速度倍率
    defaultDelay: "medium"     # 默认延迟级别
```

**效果控制**：
- **globalSpeed**：
  - `1.0`：正常播放速度
  - `2.0`：2倍速播放，所有延迟减半
  - `0.5`：慢放，所有延迟加倍
- **defaultDelay**：为没有指定 `animationDelay` 的消息设置默认延迟级别

## 🎮 播放控制功能效果

### 13. 播放状态控制

```javascript
// 通过播放控制界面实现
- 播放/暂停：控制动画播放状态
- 重置：回到动画开始位置
- 速度调节：0.1x ~ 5x 可选速度范围
```

**效果说明**：
- **播放中**：按时间序列逐个显示消息，遵循所有延迟设置
- **暂停**：停止在当前消息位置，保持当前显示状态
- **重置**：清空所有消息，回到播放开始前状态

### 14. 时间轴导航效果

**关键帧自动识别**：
- 🎵 语音消息：绿色标记
- 🖼️ 图片消息：蓝色标记  
- 📍 位置消息：橙色标记
- ↩️ 撤回消息：红色标记
- ⌨️ 输入状态：紫色标记
- ⏸️ 暂停等待：灰色标记

**交互效果**：
- 鼠标悬停时间轴：显示对应时间点的消息预览
- 点击关键帧：直接跳转到该消息位置
- 拖拽播放头：实时预览对应时间点的聊天状态

### 15. 键盘快捷键效果

| 快捷键 | 效果说明 |
|--------|----------|
| 空格键 | 播放/暂停切换 |
| ← / → | 上一条/下一条消息 |
| Shift + ← / → | 快速后退/前进 5秒 |
| Home | 重置到开始位置 |
| End | 跳转到最后一条消息 |
| 1-6 | 快速设置播放速度 (0.25x-4x) |
| - / + | 减速/加速 0.1x |
| Ctrl+N/L/P | 切换播放模式 |
| Ctrl+Z | 撤销跳转操作 |
| F1 或 ? | 显示快捷键帮助 |

## 📊 时间计算系统

### 16. 智能延迟计算

**普通消息自动延迟**：
```
延迟时间 = 800ms（基础延迟）+ 内容长度 × 20ms（每字符）
最大延迟 = 1500ms
最小延迟 = 800ms
```

**特殊消息类型延迟**：
- 语音消息：实际语音时长 + 2000ms
- 图片消息：2500ms 固定延迟
- 位置消息：2000ms 固定延迟  
- 撤回消息：根据 `recallDelay` 参数

### 17. 演绎时间映射表

| 描述性时间 | 逻辑时长 | 实际演绎时间 | 视觉效果 | 使用场景 |
|------------|----------|-------------|----------|----------|
| **快速反应类** |
| "瞬间" / "立刻" | 即时 | 0.2秒 | 闪电效果 | 条件反射回复 |
| "稍后" | 5分钟 | 1秒 | 波纹扩散 | 短暂思考 |
| "片刻后" | 10分钟 | 1.5秒 | 时钟指针转动 | 稍作停顿 |
| **正常节奏类** |
| "一会儿后" | 30分钟 | 2秒 | 云朵飘过 + 数字递增 | 处理事情 |
| "过了一阵" | 1小时 | 3秒 | 时间流逝动画 | 忙碌间隙 |
| "很久之后" | 2-3小时 | 3-4秒 | 日光变化 + 时间快进 | 长时间等待 |
| **超长等待类** |
| "许久之后" | 半天 | 4秒 | 日夜交替开始 | 很长时间后回复 |
| "第二天" | 1天 | 4-5秒 | 完整日夜循环 | 隔日回复 |
| "几天后" | 3-7天 | 5秒 | 多次日夜交替 | 跨日期对话 |
| **情感化时间** |
| "思考中" | 变动 | 2-3秒 | 思考泡泡 | 组织语言 |
| "纠结中" | 变动 | 3-4秒 | 犹豫动画 | 难以决定 |
| "长时间思考" | 变动 | 4-5秒 | 深度思考效果 | 重要决定 |
| **传统级别** |
| "短" / "short" | 不定 | 0.5秒 | 简单淡入 | 快速反应 |
| "中" / "medium" | 不定 | 1秒 | 正常过渡 | 正常节奏 |
| "长" / "long" | 不定 | 2秒 | 缓慢展现 | 慎重考虑 |

**演绎效果分级说明**：
- **0-1秒**：简单过渡效果，适合快速对话
- **1-2秒**：基础动画效果，加入简单视觉元素
- **2-3秒**：丰富动画效果，时间流逝感明显
- **3-4秒**：复合动画效果，包含环境变化
- **4-5秒**：完整演绎序列，营造强烈时间感

## 🎯 实际使用示例

### 表白场景示例（完整演绎效果）

```yaml
scene:
  title: "勇敢表白"
  participants:
    - name: "我"
      avatar: "https://ui-avatars.com/api/?name=WO&background=5856D6&color=fff"
    - name: "她"
      avatar: "https://ui-avatars.com/api/?name=TA&background=FF69B4&color=fff"

messages:
  # 试探性开场
  - speaker: "我"
    content: "在吗？有点事想跟你说"
    time: "21:30"
    animationDelay: "纠结中"     # 3-4秒演绎，犹豫动画
    
  # 对方快速回复
  - speaker: "她"
    content: "在的，什么事？"
    time: "21:31"
    animationDelay: "稍后"       # 1秒演绎，快速回复
    
  # 紧张的长时间思考
  - type: "typing"
    speaker: "我"
    duration: "长时间思考"        # 4-5秒演绎，深度思考效果
    intensity: "deep"
    hesitate: true
    
  # 紧急撤回刚想说的话
  - type: "recall"
    speaker: "我"
    originalMessage: "其实我一直喜欢你..."
    recallDelay: "紧急"          # 0.5秒演绎，紧急撤回动画
    recallReason: "panic"
    time: "21:32"
    
  # 重新组织语言的思考
  - type: "typing"
    speaker: "我"
    duration: "思考中"           # 2-3秒演绎，思考泡泡
    intensity: "normal"
    
  # 换个说法
  - speaker: "我"
    content: "没什么特别重要的事..."
    time: "21:32"
    animationDelay: "medium"
    
  # 再次深思
  - type: "typing"
    speaker: "我"
    duration: "纠结中"           # 3-4秒演绎，纠结动画
    intensity: "deep"
    hesitate: true
    
  # 最终鼓起勇气发语音
  - type: "voice"
    speaker: "我"
    voiceDuration: "15\""
    voiceText: "算了直说吧，我喜欢你很久了，想问你愿不愿意做我女朋友"
    time: "21:35"
    
  # 发送后立即后悔想撤回（但已经来不及）
  - type: "typing"
    speaker: "我"
    duration: "瞬间"            # 0.2秒演绎，条件反射
    
  - speaker: "我"
    content: "我是说..."
    time: "21:35"
    
  - type: "recall"
    speaker: "我"
    originalMessage: "我是说..."
    recallDelay: "秒撤"          # 0.2秒演绎，闪电撤回
    time: "21:35"
    
  # 漫长的等待回复
  - type: "pause"
    duration: "许久之后"         # 4秒演绎，日夜交替动画
    description: "心跳加速的等待"
    visualEffect: "timeElapse"
    
  # 对方也在纠结如何回复
  - type: "typing"
    speaker: "她"
    duration: "长时间思考"        # 4-5秒演绎，深度思考
    intensity: "deep"
    
  # 深思后的回复
  - speaker: "她"
    content: "谢谢你的喜欢，让我想想好吗"
    time: "22:15"               # 显示逻辑上的时间跳跃
    animationDelay: "深思后"     # 2-3秒演绎，慎重回复
    
  # 继续补充
  - type: "typing"
    speaker: "她"
    duration: "片刻后"          # 1.5秒演绎，稍作停顿
    
  - speaker: "她"
    content: "我们明天聊聊这个话题"
    time: "22:16"
    animationDelay: "medium"
```

**这个演绎版本的效果特点**：

1. **情感递进清晰**：从纠结→紧急撤回→深思→鼓起勇气→等待→回复
2. **时间压缩艺术**：逻辑上40多分钟的对话，实际演绎时间约25-30秒
3. **视觉效果丰富**：
   - 多种输入状态动画（深度思考、纠结、快速反应）
   - 不同撤回效果（紧急撤回vs秒撤）
   - 时间流逝的日夜交替动画
4. **情感真实还原**：通过演绎手法真实展现表白时的复杂心理过程

### 错过的爱情故事（完整参数演绎示例）

```yaml
scene:
  title: "那个雨夜的错过"
  participants:
    - name: "林晓"
      avatar: "https://ui-avatars.com/api/?name=LX&background=4F8EF7&color=fff"
    - name: "苏雨"
      avatar: "https://ui-avatars.com/api/?name=SY&background=FF6B9D&color=fff"
  theme:
    primaryColor: "#FF6B9D"      # 粉色主题，营造浪漫氛围
    backgroundColor: "#F5F7FA"    # 淡雅背景
    fontFamily: "Microsoft YaHei"
  animation:
    globalSpeed: 1.2             # 稍快节奏，增强紧张感
    defaultDelay: "medium"

messages:
  # === 第一幕：日常关心的试探 ===
  
  # 工作日的关心问候
  - speaker: "林晓"
    content: "今天加班到几点啊？"
    time: "18:30"
    animationDelay: "稍后"       # 1秒演绎，自然开场
    status: "read"
    statusDuration: "short"
    
  - speaker: "苏雨"
    content: "可能要到9点多吧...项目deadline快到了"
    time: "18:45"
    animationDelay: "一会儿后"   # 2秒演绎，显示忙碌状态
    
  # 关心但不敢直说
  - type: "typing"
    speaker: "林晓"
    duration: "纠结中"           # 3-4秒演绎，想说关心的话但不知道怎么表达
    intensity: "normal"
    hesitate: true
    
  - speaker: "林晓"
    content: "那个...注意身体"
    time: "18:46"
    animationDelay: "medium"
    
  - type: "recall"
    speaker: "林晓"
    originalMessage: "那个...注意身体"
    recallDelay: "后悔瞬间"      # 1秒演绎，觉得太生疏
    recallReason: "regret"
    time: "18:46"
    
  - type: "typing"
    speaker: "林晓"
    duration: "思考中"           # 2-3秒演绎，重新组织语言
    intensity: "normal"
    
  - speaker: "林晓"
    content: "记得吃晚饭，别饿着"
    time: "18:47"
    animationDelay: "深思后"     # 2-3秒演绎，更关心的表达
    
  # 对方被感动
  - type: "typing"
    speaker: "苏雨"
    duration: "片刻后"          # 1.5秒演绎，温暖的停顿
    
  - speaker: "苏雨"
    content: "谢谢你...总是这么关心我"
    time: "18:48"
    animationDelay: "long"      # 2秒演绎，意味深长
    status: "read"
    statusDuration: "medium"
    
  # === 第二幕：分享日常，情感升温 ===
  
  # 时间跳跃到晚上
  - type: "pause"
    duration: "过了一阵"        # 3秒演绎，时间流逝动画
    description: "几小时后的深夜"
    visualEffect: "timeElapse"
    
  - speaker: "苏雨"
    content: "终于下班了！累死了😩"
    time: "21:30"
    animationDelay: "瞬间"      # 0.2秒演绎，疲惫的快速回复
    
  # 发送工作照片
  - type: "image"
    speaker: "苏雨"
    imageUrl: "https://via.placeholder.com/300x200/FFE5E5/333?text=加班到深夜"
    imageDescription: "办公室夜景"
    time: "21:31"
    
  - speaker: "林晓"
    content: "辛苦了！这么晚了，路上小心"
    time: "21:32"
    animationDelay: "short"     # 0.5秒演绎，关心的快速回复
    
  # 语音消息表达关心
  - type: "voice"
    speaker: "林晓"
    voiceDuration: "8\""
    voiceText: "我给你点了个外卖，应该快到你楼下了"
    time: "21:33"
    
  - type: "typing"
    speaker: "苏雨"
    duration: "快速回复"        # 1秒演绎，感动的快速反应
    intensity: "light"
    
  - speaker: "苏雨"
    content: "！！！"
    time: "21:33"
    animationDelay: "瞬间"
    
  - speaker: "苏雨"
    content: "你怎么知道我没吃饭😭"
    time: "21:33"
    animationDelay: "稍后"
    
  - speaker: "苏雨"
    content: "太感动了..."
    time: "21:34"
    animationDelay: "medium"
    status: "read"
    statusDuration: "long"
    
  # === 第三幕：位置分享，准备见面 ===
  
  # 分享位置
  - type: "location"
    speaker: "苏雨"
    content: "梧桐街咖啡馆"
    coordinates:
      latitude: 39.9075
      longitude: 116.3972
    time: "21:40"
    
  - speaker: "苏雨"
    content: "我在这里等外卖，谢谢你"
    time: "21:40"
    animationDelay: "medium"
    
  # 林晓突然想要去见她
  - type: "typing"
    speaker: "林晓"
    duration: "长时间思考"      # 4-5秒演绎，内心挣扎
    intensity: "deep"
    hesitate: true
    
  - type: "recall"
    speaker: "林晓"
    originalMessage: "我现在过去陪你吧"
    recallDelay: "紧急"         # 0.5秒演绎，不敢说出口
    recallReason: "panic"
    time: "21:42"
    
  - speaker: "林晓"
    content: "不用谢，应该的"
    time: "21:42"
    animationDelay: "medium"
    
  # === 第四幕：鼓起勇气，准备表白 ===
  
  # 时间跳跃到深夜
  - type: "pause"
    duration: "许久之后"        # 4秒演绎，日夜交替，表示深夜
    description: "深夜时分，两人都还醒着"
    visualEffect: "timeElapse"
    
  - speaker: "苏雨"
    content: "睡不着...在想事情"
    time: "00:30"
    animationDelay: "deep"      # 深度思考的慢节奏
    
  - speaker: "林晓"
    content: "我也是...在想一个人"
    time: "00:31"
    animationDelay: "纠结中"    # 3-4秒演绎，暗示性的话语
    status: "read"
    statusDuration: "long"
    
  # 苏雨意识到什么
  - type: "typing"
    speaker: "苏雨"
    duration: "思考中"          # 2-3秒演绎，心跳加速
    intensity: "normal"
    
  - speaker: "苏雨"
    content: "是...是什么样的人呢？"
    time: "00:35"
    animationDelay: "长时间思考"  # 4-5秒演绎，小心翼翼的询问
    
  # 林晓准备表白
  - type: "typing"
    speaker: "林晓"
    duration: "长时间思考"      # 4-5秒演绎，最重要的时刻
    intensity: "deep"
    hesitate: true
    
  - speaker: "林晓"
    content: "很温柔，很善良"
    time: "00:38"
    animationDelay: "deep"
    
  - type: "typing"
    speaker: "林晓"
    duration: "纠结中"          # 3-4秒演绎，继续酝酿
    intensity: "deep"
    hesitate: true
    
  - speaker: "林晓"
    content: "笑起来特别好看"
    time: "00:40"
    animationDelay: "long"
    
  - speaker: "林晓"
    content: "就像..."
    time: "00:41"
    animationDelay: "medium"
    
  # 准备说出关键的话
  - type: "typing"
    speaker: "林晓"
    duration: "长时间思考"      # 4-5秒演绎，最关键时刻
    intensity: "deep"
    
  # === 第五幕：意外打断，错过表白 ===
  
  # 突然的电话打断
  - type: "pause"
    duration: "瞬间"           # 0.2秒演绎，突然的中断
    description: "苏雨的电话响了"
    
  - speaker: "苏雨"
    content: "不好意思，妈妈打电话来了"
    time: "00:42"
    animationDelay: "紧急"      # 0.5秒演绎，匆忙回复
    
  - speaker: "苏雨"
    content: "等我一下"
    time: "00:42"
    animationDelay: "瞬间"
    
  # 林晓等待的焦虑
  - type: "pause"
    duration: "很久之后"        # 3秒演绎，焦急的等待
    description: "漫长的等待"
    
  # 苏雨回来，但状态不对
  - speaker: "苏雨"
    content: "抱歉...家里有急事"
    time: "01:15"
    animationDelay: "匆忙"      # 快速但沉重
    status: "sending"
    statusDuration: "short"
    
  - speaker: "苏雨"
    content: "我可能要回家一趟"
    time: "01:15"
    animationDelay: "稍后"
    
  - type: "voice"
    speaker: "苏雨"
    voiceDuration: "12\""
    voiceText: "爸爸突然住院了，我明早就要回老家，可能要待一段时间"
    time: "01:16"
    
  # 林晓的关心和遗憾
  - type: "typing"
    speaker: "林晓"
    duration: "瞬间"           # 0.2秒演绎，条件反射的关心
    
  - speaker: "林晓"
    content: "别担心，叔叔会没事的"
    time: "01:16"
    animationDelay: "瞬间"
    
  - speaker: "林晓"
    content: "需要帮忙的话随时联系我"
    time: "01:17"
    animationDelay: "short"
    
  # 想说的话最终没能说出口
  - type: "typing"
    speaker: "林晓"
    duration: "纠结中"          # 3-4秒演绎，想说关心的话但不合时宜
    intensity: "deep"
    hesitate: true
    
  - type: "recall"
    speaker: "林晓"
    originalMessage: "刚才我想说的那个人..."
    recallDelay: "深思后"       # 2-3秒演绎，时机不对
    recallReason: "reconsider"
    time: "01:18"
    
  - speaker: "林晓"
    content: "路上小心，到了给我报个平安"
    time: "01:18"
    animationDelay: "深思后"
    
  # === 第六幕：错过的结尾 ===
  
  - speaker: "苏雨"
    content: "好的，谢谢你"
    time: "01:19"
    animationDelay: "medium"
    
  - type: "pause"
    duration: "片刻后"          # 1.5秒演绎，短暂的沉默
    description: "两人都想说什么，但都没说出口"
    
  - speaker: "苏雨"
    content: "晚安"
    time: "01:20"
    animationDelay: "long"      # 2秒演绎，意味深长的晚安
    status: "read"
    statusDuration: "long"
    
  - type: "typing"
    speaker: "林晓"
    duration: "长时间思考"      # 4-5秒演绎，最后的犹豫
    intensity: "deep"
    hesitate: true
    
  - speaker: "林晓"
    content: "晚安，苏雨"
    time: "01:25"
    animationDelay: "许久之后"  # 4秒演绎，深深的遗憾
    
  # 时间跳跃结尾
  - type: "pause"
    duration: "第二天"         # 4-5秒演绎，日夜交替，暗示错过
    description: "有些话，错过了就是一辈子"
    visualEffect: "timeElapse"
    
  # 最后的图片消息
  - type: "image"
    speaker: "苏雨"
    imageUrl: "https://via.placeholder.com/300x200/D3E3FD/333?text=火车站"
    imageDescription: "踏上回家路的背影"
    time: "06:30"
    
  - speaker: "林晓"
    content: "一路平安"
    time: "06:35"
    animationDelay: "许久之后"  # 4秒演绎，深深的不舍
    status: "sent"              # 只是发送，没有回复
    statusDuration: "long"
```

**这个复杂场景的演绎效果亮点**：

1. **时间跨度演绎**：从傍晚18:30到次日6:30，通过多次时间跳跃展现完整时间线
2. **情感层次递进**：关心→试探→升温→准备表白→意外打断→错过遗憾
3. **全参数类型应用**：
   - ✅ 普通文本消息（各种animationDelay）
   - ✅ 消息状态控制（sending/sent/read + statusDuration）
   - ✅ 暂停等待（6种不同时长的演绎效果）
   - ✅ 输入状态（4种强度 + hesitate效果）
   - ✅ 语音消息（2条，表达重要信息）
   - ✅ 图片消息（3张，记录关键时刻）
   - ✅ 位置消息（约会地点分享）
   - ✅ 消息撤回（4种不同情感的撤回）
   - ✅ 场景配置（浪漫主题色彩）

4. **演绎时间控制**：总逻辑时间跨度12小时，实际演绎时间约2-3分钟
5. **情感真实性**：通过犹豫、撤回、长时间思考等细节展现暗恋心理
6. **戏剧性结构**：完整的起承转合，意外打断营造遗憾美感

这个场景完美演示了如何使用所有参数类型来创造一个感人的爱情故事。

### 精确时间计算

根据演绎时间映射表，让我们精确计算这个场景的实际播放时长：

#### 第一幕：日常关心的试探 (17.0秒)
1. "今天加班到几点啊？" - `animationDelay: "稍后"` = **1.0秒**
2. "可能要到9点多吧..." - `animationDelay: "一会儿后"` = **2.0秒**
3. `typing "纠结中"` = **3.5秒** (3-4秒取中值)
4. "那个...注意身体" - `animationDelay: "medium"` = **1.0秒**
5. `recall "后悔瞬间"` = **1.0秒**
6. `typing "思考中"` = **2.5秒** (2-3秒取中值)
7. "记得吃晚饭，别饿着" - `animationDelay: "深思后"` = **2.5秒** (2-3秒取中值)
8. `typing "片刻后"` = **1.5秒**
9. "谢谢你...总是这么关心我" - `animationDelay: "long"` = **2.0秒**

#### 第二幕：分享日常，情感升温 (19.4秒)
10. `pause "过了一阵"` = **3.0秒**
11. "终于下班了！" - `animationDelay: "瞬间"` = **0.2秒**
12. 图片消息 (默认图片延迟) = **2.5秒**
13. "辛苦了！这么晚了，路上小心" - `animationDelay: "short"` = **0.5秒**
14. 语音消息 (8秒语音 + 2秒展示延迟) = **10.0秒**
15. `typing "快速回复"` = **1.0秒**
16. "！！！" - `animationDelay: "瞬间"` = **0.2秒**
17. "你怎么知道我没吃饭😭" - `animationDelay: "稍后"` = **1.0秒**
18. "太感动了..." - `animationDelay: "medium"` = **1.0秒**

#### 第三幕：位置分享，准备见面 (9.0秒)
19. 位置消息 (默认位置延迟) = **2.0秒**
20. "我在这里等外卖，谢谢你" - `animationDelay: "medium"` = **1.0秒**
21. `typing "长时间思考"` = **4.5秒** (4-5秒取中值)
22. `recall "紧急"` = **0.5秒**
23. "不用谢，应该的" - `animationDelay: "medium"` = **1.0秒**

#### 第四幕：鼓起勇气，准备表白 (34.5秒)
24. `pause "许久之后"` = **4.0秒**
25. "睡不着...在想事情" - `animationDelay: "deep"` = **2.5秒** (深度思考效果)
26. "我也是...在想一个人" - `animationDelay: "纠结中"` = **3.5秒** (3-4秒取中值)
27. `typing "思考中"` = **2.5秒** (2-3秒取中值)
28. "是...是什么样的人呢？" - `animationDelay: "长时间思考"` = **4.5秒** (4-5秒取中值)
29. `typing "长时间思考"` = **4.5秒** (4-5秒取中值)
30. "很温柔，很善良" - `animationDelay: "deep"` = **2.5秒**
31. `typing "纠结中"` = **3.5秒** (3-4秒取中值)
32. "笑起来特别好看" - `animationDelay: "long"` = **2.0秒**
33. "就像..." - `animationDelay: "medium"` = **1.0秒**
34. `typing "长时间思考"` = **4.5秒** (4-5秒取中值)

#### 第五幕：意外打断，错过表白 (29.3秒)
35. `pause "瞬间"` = **0.2秒**
36. "不好意思，妈妈打电话来了" - `animationDelay: "紧急"` = **0.5秒**
37. "等我一下" - `animationDelay: "瞬间"` = **0.2秒**
38. `pause "很久之后"` = **3.5秒** (3-4秒取中值)
39. "抱歉...家里有急事" - `animationDelay: "匆忙"` = **0.5秒** (快速但沉重)
40. "我可能要回家一趟" - `animationDelay: "稍后"` = **1.0秒**
41. 语音消息 (12秒语音 + 2秒展示延迟) = **14.0秒**
42. `typing "瞬间"` = **0.2秒**
43. "别担心，叔叔会没事的" - `animationDelay: "瞬间"` = **0.2秒**
44. "需要帮忙的话随时联系我" - `animationDelay: "short"` = **0.5秒**
45. `typing "纠结中"` = **3.5秒** (3-4秒取中值)
46. `recall "深思后"` = **2.5秒** (2-3秒取中值)
47. "路上小心，到了给我报个平安" - `animationDelay: "深思后"` = **2.5秒** (2-3秒取中值)

#### 第六幕：错过的结尾 (24.0秒)
48. "好的，谢谢你" - `animationDelay: "medium"` = **1.0秒**
49. `pause "片刻后"` = **1.5秒**
50. "晚安" - `animationDelay: "long"` = **2.0秒**
51. `typing "长时间思考"` = **4.5秒** (4-5秒取中值)
52. "晚安，苏雨" - `animationDelay: "许久之后"` = **4.0秒**
53. `pause "第二天"` = **4.5秒** (4-5秒取中值)
54. 图片消息 (火车站背影) = **2.5秒**
55. "一路平安" - `animationDelay: "许久之后"` = **4.0秒**

#### 总时长统计

| 幕次 | 时长 | 主要内容 |
|------|------|----------|
| 第一幕 | 17.0秒 | 日常关心的试探 |
| 第二幕 | 19.4秒 | 分享日常，情感升温 |
| 第三幕 | 9.0秒 | 位置分享，准备见面 |
| 第四幕 | 34.5秒 | 鼓起勇气，准备表白 |
| 第五幕 | 29.3秒 | 意外打断，错过表白 |
| 第六幕 | 24.0秒 | 错过的结尾 |
| **总计** | **133.2秒** | **约2分13秒** |

#### 时间分布分析

- **对话密集期** (第一、二幕)：36.4秒 (27.3%)
- **情感高潮期** (第四幕)：34.5秒 (25.9%) 
- **转折冲突期** (第五幕)：29.3秒 (22.0%)
- **情感收尾期** (第六幕)：24.0秒 (18.0%)
- **过渡连接期** (第三幕)：9.0秒 (6.8%)

这个场景在2分13秒内，通过精心设计的演绎节奏，完整展现了一个跨越12小时的爱情故事，实现了出色的时间压缩艺术效果。

## 📝 演绎效果配置建议

### 🎭 演绎设计原则

1. **时间压缩艺术**：
   - 实际演绎时间控制在5秒以内，保持观看体验流畅
   - 长时间等待通过视觉效果演绎，而非真实等待
   - 逻辑时间与演绎时间分离，营造时间跨度感

2. **情感节奏控制**：
   - **快节奏场景**（争吵、紧急）：多用0.2-1秒的快速切换
   - **正常对话**：1-2秒的自然节奏
   - **深沉场景**（表白、道歉）：2-4秒的深度演绎
   - **时间跳跃**：4-5秒的完整演绎序列

3. **视觉效果层次**：
   - **基础层**：消息出现、状态变化
   - **交互层**：输入状态、撤回动画
   - **环境层**：时间流逝、氛围变化
   - **特效层**：情感强化、戏剧效果

### 🎨 演绎效果搭配技巧

4. **消息类型组合演绎**：
   - **文字 + 撤回 + 语音**：展现从犹豫到坚定的心理变化
   - **长时间输入 + 简短回复**：营造"说了很多，但话到嘴边又咽下"的效果
   - **快速连发 + 暂停 + 深思回复**：展现情绪从激动到冷静的过程

5. **时间跳跃的艺术处理**：
   - **短跳跃**（5-30分钟）：用时钟、云朵等轻松元素
   - **中跳跃**（1-6小时）：加入光影变化、生活场景
   - **长跳跃**（天/周/月）：日夜交替、季节变化、数字翻页

6. **情感演绎强化**：
   - **紧张感**：快速输入 + 紧急撤回 + 重新组织
   - **期待感**：长时间输入 + 暂停 + 重要消息
   - **后悔感**：发送 + 立即撤回 + 重新编辑
   - **犹豫感**：反复输入停止 + 多次撤回重发

### 🎯 实用配置策略

7. **角色性格演绎**：
   - **急性子角色**：多用"瞬间"、"立刻"等快速响应
   - **慢性子角色**：多用"深思后"、"长时间思考"
   - **纠结型角色**：频繁使用hesitate和撤回功能
   - **直爽型角色**：少用犹豫，多用直接回复

8. **场景氛围营造**：
   - **日常聊天**：以1-2秒的自然节奏为主
   - **重要对话**：适当延长思考时间，增加仪式感
   - **紧急情况**：多用快速响应和紧急撤回
   - **感情戏**：充分利用时间流逝和深度思考效果

9. **技术实现建议**：
   - 优先使用描述性时间词汇，增强可读性
   - 合理安排关键帧，确保重要情节有视觉标记
   - 避免连续的长时间演绎，注意节奏变化
   - 预留缓冲时间，让观众有情感消化的空间

10. **用户体验优化**：
    - 提供演绎速度调节选项（0.5x-2x）
    - 支持跳过长时间演绎，直接查看结果
    - 关键情节提供重播功能
    - 在时间轴上明确标记演绎vs真实时间

---

*本文档将持续更新，反映最新的功能特性和使用方法。*
